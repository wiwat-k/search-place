{"remainingRequest":"/Applications/working/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/working/front/src/components/home.vue?vue&type=style&index=0&id=9efd37fe&scoped=true&lang=css&","dependencies":[{"path":"/Applications/working/front/src/components/home.vue","mtime":1576425485357},{"path":"/Applications/working/front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/working/front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Applications/working/front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Applications/working/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/working/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ib3JkZXItMSB7CiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpOwp9Ci5ib3JkZXItMSB7CiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpOwp9Ci5ib3gtc2VhcmNoIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgcGFkZGluZzogMTVweDsKICBtYXJnaW4tcmlnaHQ6IC0xNXB4OwogIG1hcmdpbi1sZWZ0OiAtMTVweDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjA1KTsKICBib3gtc2hhZG93OiAwcHggMXB4IDVweCAtMXB4OwogIHotaW5kZXg6IDEwOwp9Ci5kaXYtbWFwIHsKICBwYWRkaW5nOiAwcHg7Cn0KLnNwaW5uZXItZ3Jvdy1zbSB7CiAgbWFyZ2luOiA1cHggIWltcG9ydGFudDsKICB3aWR0aDogMC43cmVtICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiAwLjdyZW0gIWltcG9ydGFudDsKfQoubGlzdC1ncm91cC1pdGVtOmZpcnN0LWNoaWxkLAoubGlzdC1ncm91cC1pdGVtOmxhc3QtY2hpbGQgewogIGJvcmRlci1yYWRpdXM6IDBweDsKfQoubGlzdC1ncm91cC1pdGVtIHsKICBib3JkZXItcmlnaHQ6IDBweDsKfQoKLmJveC1saXN0IHsKICBwYWRkaW5nOiAwcHg7CiAgbWFyZ2luLXJpZ2h0OiAtMTVweDsKICBtYXJnaW4tbGVmdDogLTE1cHg7CiAgb3ZlcmZsb3cteTogYXV0bzsKfQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0ODBweCkgewogIC5ib3gtbGlzdCB7CiAgICBoZWlnaHQ6IGNhbGMoNTB2aCAtIDY5cHgpOwogIH0KICAuZGl2LW1hcCB7CiAgICBwYWRkaW5nOiAwcHg7CiAgICBoZWlnaHQ6IDUwdmg7CiAgfQogIC5jb2wtbWFpbiB7CiAgICBoZWlnaHQ6IDUwdmg7CiAgfQp9CkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDQ4MXB4KSB7CiAgLmJveC1saXN0IHsKICAgIGhlaWdodDogY2FsYygxMDB2aCAtIDY5cHgpOwogIH0KICAuY29sLW1haW4gewogICAgaGVpZ2h0OiAxMDB2aDsKICB9Cn0K"},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-container fluid>\n    <b-row>\n      <b-col cols=\"12\" sm=\"3\" class=\"col-main border-1\">\n        <div class=\"box-search\">\n          <b-input-group>\n            <b-form-input v-model=\"textSearch\" placeholder=\"Search Restaurant\"></b-form-input>\n            <b-input-group-append>\n              <b-button variant=\"outline-primary\" v-if=\"!btn_loading\" @click=\"search('')\">\n                <font-awesome-icon icon=\"search\" />Search\n              </b-button>\n              <b-button v-else variant=\"primary\" disabled>\n                <b-spinner small type=\"grow\"></b-spinner>Loading...\n              </b-button>\n            </b-input-group-append>\n          </b-input-group>\n        </div>\n        <div class=\"box-list\">\n          <b-list-group v-if=\"itemRestaurant.length > 0\">\n            <b-list-group-item\n              v-for=\"(item,i) in itemRestaurant\"\n              :key=\"i\"\n              @click=\"marker(item.geometry.location.lat,item.geometry.location.lng)\"\n              href=\"#\"\n            >\n              <b-row no-gutters>\n                <b-col md=\"4\" v-if=\"item.photos\">\n                  <b-card-img\n                    :src=\"'https://maps.googleapis.com/maps/api/place/photo?maxwidth=200&photoreference='+item.photos[0].photo_reference+'&key='+gkey\"\n                    class=\"rounded-0\"\n                  ></b-card-img>\n                </b-col>\n                <b-col :md=\"`${(item.photos?'8':'12')}`\" style=\"padding:5px;\">\n                  <p>{{item.name}}</p>\n                  <p>{{item.formatted_address}}</p>\n                  <p>Open Now : \n                    {{\n                    marker.open_now == true ? 'Open' : 'Close'\n                    }}\n                  </p>\n                </b-col>\n              </b-row>\n            </b-list-group-item>\n            <b-list-group-item>\n              <b-button\n                :disabled=\"btn_loading\"\n                variant=\"outline-primary\"\n                @click=\"search(tokenPage)\"\n              >\n                Next Page\n                <font-awesome-icon style=\"margin-left:10px;\" icon=\"angle-right\" />\n              </b-button>\n            </b-list-group-item>\n          </b-list-group>\n          <p style=\"margin:15px;\" v-else>No Result</p>\n        </div>\n      </b-col>\n      <b-col cols=\"12\" sm=\"9\" class=\"col-main div-map border-2\">\n        <GmapMap :center=\"{lat: lat, lng: lng}\" :zoom=\"zoom\" style=\"width: 100%; height: 100%\">\n          <GmapMarker\n            v-for=\"(item,i) in itemRestaurant\"\n            :key=\"i\"\n            ref=\"myMarker\"\n            :position=\"google && new google.maps.LatLng(item.geometry.location.lat,item.geometry.location.lng)\"\n            @click=\"toggleInfoWindow(item,i)\"\n          >></GmapMarker>\n          <gmap-info-window\n            :options=\"infoOptions\"\n            :position=\"infoWindowPos\"\n            :opened=\"infoWinOpen\"\n            @closeclick=\"infoWinOpen=false\"\n          >\n            <div v-html=\"infoContent\"></div>\n          </gmap-info-window>\n        </GmapMap>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport { gmapApi } from 'vue2-google-maps'\nexport default {\n  computed: {\n    google: gmapApi\n  },\n  data: () => {\n    return {\n      btn_loading: false,\n      textSearch: 'Bangsue',\n      itemRestaurant: [],\n      tokenPage: '',\n      lat: 13.8150564,\n      lng: 100.5289701,\n      zoom: 15,\n      infoContent: '',\n      infoWindowPos: {\n        lat: 0,\n        lng: 0\n      },\n      infoWinOpen: false,\n      currentMidx: null,\n      //optional: offset infowindow so it visually sits nicely on top of our marker\n      infoOptions: {\n        pixelOffset: {\n          width: 0,\n          height: -35\n        }\n      }\n    }\n  },\n  methods: {\n    marker(val1, val2) {\n      this.lat = val1\n      this.lng = val2\n      this.zoom = 20\n    },\n    async search(tokenPage) {\n      this.btn_loading = true\n      await this.axios\n        .get('http://localhost:8000/api/restaurant/search', {\n          params: {\n            text: this.textSearch,\n            gkey: this.gkey,\n            pagetoken: tokenPage\n          }\n        })\n        .then(response => {\n          if (response.status == 'ZERO_RESULTS') {\n            this.itemRestaurant = []\n            this.tokenPage = ''\n          } else {\n            var results = response.data.results\n            this.itemRestaurant = results\n            this.tokenPage = response.data.next_page_token\n            this.lat = results[0].geometry.location.lat\n            this.lng = results[0].geometry.location.lng\n          }\n        })\n        .catch(error => {\n          // handle error\n          console.log(error)\n        })\n        .finally(() => {\n          this.btn_loading = false\n        })\n    },\n    toggleInfoWindow: function(marker, idx) {\n      this.infoWindowPos = marker.geometry.location\n      this.infoContent = this.getInfoWindowContent(marker)\n\n      //check if its the same marker that was selected if yes toggle\n      if (this.currentMidx == idx) {\n        this.infoWinOpen = !this.infoWinOpen\n      }\n      //if different marker set infowindow to open and reset current marker index\n      else {\n        this.infoWinOpen = true\n        this.currentMidx = idx\n      }\n    },\n    getInfoWindowContent: function(marker) {\n      // create info window content\n      var image = ''\n      if (marker.photos !== undefined) {\n        image = `<img src=\"https://maps.googleapis.com/maps/api/place/photo?maxwidth=200&photoreference=${marker.photos[0].photo_reference}&key=${this.gkey}\" alt=\"Placeholder image\">`\n      }\n      return `<div class=\"card\" style=\"max-width:200.5px;\">\n  <div class=\"card-image\">\n    <figure class=\"image is-4by3\">\n      ${image}\n    </figure>\n  </div>\n  <div class=\"card-content\">\n    <div class=\"content\" style=\"padding:5px;\">\n      <p class=\"title is-4\">${marker.name}</p>\n      <p class=\"title is-4\">${marker.formatted_address}</p>\n      <p class=\"title is-4\">Open Now : ${\n        marker.open_now == true ? 'Open' : 'Close'\n      }</p>\n    </div>\n  </div>\n</div>`\n    }\n  },\n  mounted() {\n    this.search()\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.border-1 {\n  border-right: 1px solid rgba(0, 0, 0, 0.1);\n}\n.border-1 {\n  border-right: 1px solid rgba(0, 0, 0, 0.1);\n}\n.box-search {\n  position: relative;\n  padding: 15px;\n  margin-right: -15px;\n  margin-left: -15px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  box-shadow: 0px 1px 5px -1px;\n  z-index: 10;\n}\n.div-map {\n  padding: 0px;\n}\n.spinner-grow-sm {\n  margin: 5px !important;\n  width: 0.7rem !important;\n  height: 0.7rem !important;\n}\n.list-group-item:first-child,\n.list-group-item:last-child {\n  border-radius: 0px;\n}\n.list-group-item {\n  border-right: 0px;\n}\n\n.box-list {\n  padding: 0px;\n  margin-right: -15px;\n  margin-left: -15px;\n  overflow-y: auto;\n}\n@media screen and (max-width: 480px) {\n  .box-list {\n    height: calc(50vh - 69px);\n  }\n  .div-map {\n    padding: 0px;\n    height: 50vh;\n  }\n  .col-main {\n    height: 50vh;\n  }\n}\n@media screen and (min-width: 481px) {\n  .box-list {\n    height: calc(100vh - 69px);\n  }\n  .col-main {\n    height: 100vh;\n  }\n}\n</style>\n"]}]}