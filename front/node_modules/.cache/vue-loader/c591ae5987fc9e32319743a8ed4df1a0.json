{"remainingRequest":"/Applications/working/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/working/front/src/components/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/working/front/src/components/home.vue","mtime":1576425485357},{"path":"/Applications/working/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/working/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/working/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/working/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdtYXBBcGkgfSBmcm9tICd2dWUyLWdvb2dsZS1tYXBzJwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcHV0ZWQ6IHsKICAgIGdvb2dsZTogZ21hcEFwaQogIH0sCiAgZGF0YTogKCkgPT4gewogICAgcmV0dXJuIHsKICAgICAgYnRuX2xvYWRpbmc6IGZhbHNlLAogICAgICB0ZXh0U2VhcmNoOiAnQmFuZ3N1ZScsCiAgICAgIGl0ZW1SZXN0YXVyYW50OiBbXSwKICAgICAgdG9rZW5QYWdlOiAnJywKICAgICAgbGF0OiAxMy44MTUwNTY0LAogICAgICBsbmc6IDEwMC41Mjg5NzAxLAogICAgICB6b29tOiAxNSwKICAgICAgaW5mb0NvbnRlbnQ6ICcnLAogICAgICBpbmZvV2luZG93UG9zOiB7CiAgICAgICAgbGF0OiAwLAogICAgICAgIGxuZzogMAogICAgICB9LAogICAgICBpbmZvV2luT3BlbjogZmFsc2UsCiAgICAgIGN1cnJlbnRNaWR4OiBudWxsLAogICAgICAvL29wdGlvbmFsOiBvZmZzZXQgaW5mb3dpbmRvdyBzbyBpdCB2aXN1YWxseSBzaXRzIG5pY2VseSBvbiB0b3Agb2Ygb3VyIG1hcmtlcgogICAgICBpbmZvT3B0aW9uczogewogICAgICAgIHBpeGVsT2Zmc2V0OiB7CiAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgIGhlaWdodDogLTM1CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBtYXJrZXIodmFsMSwgdmFsMikgewogICAgICB0aGlzLmxhdCA9IHZhbDEKICAgICAgdGhpcy5sbmcgPSB2YWwyCiAgICAgIHRoaXMuem9vbSA9IDIwCiAgICB9LAogICAgYXN5bmMgc2VhcmNoKHRva2VuUGFnZSkgewogICAgICB0aGlzLmJ0bl9sb2FkaW5nID0gdHJ1ZQogICAgICBhd2FpdCB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9yZXN0YXVyYW50L3NlYXJjaCcsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHRTZWFyY2gsCiAgICAgICAgICAgIGdrZXk6IHRoaXMuZ2tleSwKICAgICAgICAgICAgcGFnZXRva2VuOiB0b2tlblBhZ2UKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gJ1pFUk9fUkVTVUxUUycpIHsKICAgICAgICAgICAgdGhpcy5pdGVtUmVzdGF1cmFudCA9IFtdCiAgICAgICAgICAgIHRoaXMudG9rZW5QYWdlID0gJycKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciByZXN1bHRzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzCiAgICAgICAgICAgIHRoaXMuaXRlbVJlc3RhdXJhbnQgPSByZXN1bHRzCiAgICAgICAgICAgIHRoaXMudG9rZW5QYWdlID0gcmVzcG9uc2UuZGF0YS5uZXh0X3BhZ2VfdG9rZW4KICAgICAgICAgICAgdGhpcy5sYXQgPSByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdAogICAgICAgICAgICB0aGlzLmxuZyA9IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24ubG5nCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgLy8gaGFuZGxlIGVycm9yCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMuYnRuX2xvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICB9LAogICAgdG9nZ2xlSW5mb1dpbmRvdzogZnVuY3Rpb24obWFya2VyLCBpZHgpIHsKICAgICAgdGhpcy5pbmZvV2luZG93UG9zID0gbWFya2VyLmdlb21ldHJ5LmxvY2F0aW9uCiAgICAgIHRoaXMuaW5mb0NvbnRlbnQgPSB0aGlzLmdldEluZm9XaW5kb3dDb250ZW50KG1hcmtlcikKCiAgICAgIC8vY2hlY2sgaWYgaXRzIHRoZSBzYW1lIG1hcmtlciB0aGF0IHdhcyBzZWxlY3RlZCBpZiB5ZXMgdG9nZ2xlCiAgICAgIGlmICh0aGlzLmN1cnJlbnRNaWR4ID09IGlkeCkgewogICAgICAgIHRoaXMuaW5mb1dpbk9wZW4gPSAhdGhpcy5pbmZvV2luT3BlbgogICAgICB9CiAgICAgIC8vaWYgZGlmZmVyZW50IG1hcmtlciBzZXQgaW5mb3dpbmRvdyB0byBvcGVuIGFuZCByZXNldCBjdXJyZW50IG1hcmtlciBpbmRleAogICAgICBlbHNlIHsKICAgICAgICB0aGlzLmluZm9XaW5PcGVuID0gdHJ1ZQogICAgICAgIHRoaXMuY3VycmVudE1pZHggPSBpZHgKICAgICAgfQogICAgfSwKICAgIGdldEluZm9XaW5kb3dDb250ZW50OiBmdW5jdGlvbihtYXJrZXIpIHsKICAgICAgLy8gY3JlYXRlIGluZm8gd2luZG93IGNvbnRlbnQKICAgICAgdmFyIGltYWdlID0gJycKICAgICAgaWYgKG1hcmtlci5waG90b3MgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGltYWdlID0gYDxpbWcgc3JjPSJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvcGxhY2UvcGhvdG8/bWF4d2lkdGg9MjAwJnBob3RvcmVmZXJlbmNlPSR7bWFya2VyLnBob3Rvc1swXS5waG90b19yZWZlcmVuY2V9JmtleT0ke3RoaXMuZ2tleX0iIGFsdD0iUGxhY2Vob2xkZXIgaW1hZ2UiPmAKICAgICAgfQogICAgICByZXR1cm4gYDxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJtYXgtd2lkdGg6MjAwLjVweDsiPgogIDxkaXYgY2xhc3M9ImNhcmQtaW1hZ2UiPgogICAgPGZpZ3VyZSBjbGFzcz0iaW1hZ2UgaXMtNGJ5MyI+CiAgICAgICR7aW1hZ2V9CiAgICA8L2ZpZ3VyZT4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJjYXJkLWNvbnRlbnQiPgogICAgPGRpdiBjbGFzcz0iY29udGVudCIgc3R5bGU9InBhZGRpbmc6NXB4OyI+CiAgICAgIDxwIGNsYXNzPSJ0aXRsZSBpcy00Ij4ke21hcmtlci5uYW1lfTwvcD4KICAgICAgPHAgY2xhc3M9InRpdGxlIGlzLTQiPiR7bWFya2VyLmZvcm1hdHRlZF9hZGRyZXNzfTwvcD4KICAgICAgPHAgY2xhc3M9InRpdGxlIGlzLTQiPk9wZW4gTm93IDogJHsKICAgICAgICBtYXJrZXIub3Blbl9ub3cgPT0gdHJ1ZSA/ICdPcGVuJyA6ICdDbG9zZScKICAgICAgfTwvcD4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj5gCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zZWFyY2goKQogIH0KfQo="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-container fluid>\n    <b-row>\n      <b-col cols=\"12\" sm=\"3\" class=\"col-main border-1\">\n        <div class=\"box-search\">\n          <b-input-group>\n            <b-form-input v-model=\"textSearch\" placeholder=\"Search Restaurant\"></b-form-input>\n            <b-input-group-append>\n              <b-button variant=\"outline-primary\" v-if=\"!btn_loading\" @click=\"search('')\">\n                <font-awesome-icon icon=\"search\" />Search\n              </b-button>\n              <b-button v-else variant=\"primary\" disabled>\n                <b-spinner small type=\"grow\"></b-spinner>Loading...\n              </b-button>\n            </b-input-group-append>\n          </b-input-group>\n        </div>\n        <div class=\"box-list\">\n          <b-list-group v-if=\"itemRestaurant.length > 0\">\n            <b-list-group-item\n              v-for=\"(item,i) in itemRestaurant\"\n              :key=\"i\"\n              @click=\"marker(item.geometry.location.lat,item.geometry.location.lng)\"\n              href=\"#\"\n            >\n              <b-row no-gutters>\n                <b-col md=\"4\" v-if=\"item.photos\">\n                  <b-card-img\n                    :src=\"'https://maps.googleapis.com/maps/api/place/photo?maxwidth=200&photoreference='+item.photos[0].photo_reference+'&key='+gkey\"\n                    class=\"rounded-0\"\n                  ></b-card-img>\n                </b-col>\n                <b-col :md=\"`${(item.photos?'8':'12')}`\" style=\"padding:5px;\">\n                  <p>{{item.name}}</p>\n                  <p>{{item.formatted_address}}</p>\n                  <p>Open Now : \n                    {{\n                    marker.open_now == true ? 'Open' : 'Close'\n                    }}\n                  </p>\n                </b-col>\n              </b-row>\n            </b-list-group-item>\n            <b-list-group-item>\n              <b-button\n                :disabled=\"btn_loading\"\n                variant=\"outline-primary\"\n                @click=\"search(tokenPage)\"\n              >\n                Next Page\n                <font-awesome-icon style=\"margin-left:10px;\" icon=\"angle-right\" />\n              </b-button>\n            </b-list-group-item>\n          </b-list-group>\n          <p style=\"margin:15px;\" v-else>No Result</p>\n        </div>\n      </b-col>\n      <b-col cols=\"12\" sm=\"9\" class=\"col-main div-map border-2\">\n        <GmapMap :center=\"{lat: lat, lng: lng}\" :zoom=\"zoom\" style=\"width: 100%; height: 100%\">\n          <GmapMarker\n            v-for=\"(item,i) in itemRestaurant\"\n            :key=\"i\"\n            ref=\"myMarker\"\n            :position=\"google && new google.maps.LatLng(item.geometry.location.lat,item.geometry.location.lng)\"\n            @click=\"toggleInfoWindow(item,i)\"\n          >></GmapMarker>\n          <gmap-info-window\n            :options=\"infoOptions\"\n            :position=\"infoWindowPos\"\n            :opened=\"infoWinOpen\"\n            @closeclick=\"infoWinOpen=false\"\n          >\n            <div v-html=\"infoContent\"></div>\n          </gmap-info-window>\n        </GmapMap>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport { gmapApi } from 'vue2-google-maps'\nexport default {\n  computed: {\n    google: gmapApi\n  },\n  data: () => {\n    return {\n      btn_loading: false,\n      textSearch: 'Bangsue',\n      itemRestaurant: [],\n      tokenPage: '',\n      lat: 13.8150564,\n      lng: 100.5289701,\n      zoom: 15,\n      infoContent: '',\n      infoWindowPos: {\n        lat: 0,\n        lng: 0\n      },\n      infoWinOpen: false,\n      currentMidx: null,\n      //optional: offset infowindow so it visually sits nicely on top of our marker\n      infoOptions: {\n        pixelOffset: {\n          width: 0,\n          height: -35\n        }\n      }\n    }\n  },\n  methods: {\n    marker(val1, val2) {\n      this.lat = val1\n      this.lng = val2\n      this.zoom = 20\n    },\n    async search(tokenPage) {\n      this.btn_loading = true\n      await this.axios\n        .get('http://localhost:8000/api/restaurant/search', {\n          params: {\n            text: this.textSearch,\n            gkey: this.gkey,\n            pagetoken: tokenPage\n          }\n        })\n        .then(response => {\n          if (response.status == 'ZERO_RESULTS') {\n            this.itemRestaurant = []\n            this.tokenPage = ''\n          } else {\n            var results = response.data.results\n            this.itemRestaurant = results\n            this.tokenPage = response.data.next_page_token\n            this.lat = results[0].geometry.location.lat\n            this.lng = results[0].geometry.location.lng\n          }\n        })\n        .catch(error => {\n          // handle error\n          console.log(error)\n        })\n        .finally(() => {\n          this.btn_loading = false\n        })\n    },\n    toggleInfoWindow: function(marker, idx) {\n      this.infoWindowPos = marker.geometry.location\n      this.infoContent = this.getInfoWindowContent(marker)\n\n      //check if its the same marker that was selected if yes toggle\n      if (this.currentMidx == idx) {\n        this.infoWinOpen = !this.infoWinOpen\n      }\n      //if different marker set infowindow to open and reset current marker index\n      else {\n        this.infoWinOpen = true\n        this.currentMidx = idx\n      }\n    },\n    getInfoWindowContent: function(marker) {\n      // create info window content\n      var image = ''\n      if (marker.photos !== undefined) {\n        image = `<img src=\"https://maps.googleapis.com/maps/api/place/photo?maxwidth=200&photoreference=${marker.photos[0].photo_reference}&key=${this.gkey}\" alt=\"Placeholder image\">`\n      }\n      return `<div class=\"card\" style=\"max-width:200.5px;\">\n  <div class=\"card-image\">\n    <figure class=\"image is-4by3\">\n      ${image}\n    </figure>\n  </div>\n  <div class=\"card-content\">\n    <div class=\"content\" style=\"padding:5px;\">\n      <p class=\"title is-4\">${marker.name}</p>\n      <p class=\"title is-4\">${marker.formatted_address}</p>\n      <p class=\"title is-4\">Open Now : ${\n        marker.open_now == true ? 'Open' : 'Close'\n      }</p>\n    </div>\n  </div>\n</div>`\n    }\n  },\n  mounted() {\n    this.search()\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.border-1 {\n  border-right: 1px solid rgba(0, 0, 0, 0.1);\n}\n.border-1 {\n  border-right: 1px solid rgba(0, 0, 0, 0.1);\n}\n.box-search {\n  position: relative;\n  padding: 15px;\n  margin-right: -15px;\n  margin-left: -15px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  box-shadow: 0px 1px 5px -1px;\n  z-index: 10;\n}\n.div-map {\n  padding: 0px;\n}\n.spinner-grow-sm {\n  margin: 5px !important;\n  width: 0.7rem !important;\n  height: 0.7rem !important;\n}\n.list-group-item:first-child,\n.list-group-item:last-child {\n  border-radius: 0px;\n}\n.list-group-item {\n  border-right: 0px;\n}\n\n.box-list {\n  padding: 0px;\n  margin-right: -15px;\n  margin-left: -15px;\n  overflow-y: auto;\n}\n@media screen and (max-width: 480px) {\n  .box-list {\n    height: calc(50vh - 69px);\n  }\n  .div-map {\n    padding: 0px;\n    height: 50vh;\n  }\n  .col-main {\n    height: 50vh;\n  }\n}\n@media screen and (min-width: 481px) {\n  .box-list {\n    height: calc(100vh - 69px);\n  }\n  .col-main {\n    height: 100vh;\n  }\n}\n</style>\n"]}]}